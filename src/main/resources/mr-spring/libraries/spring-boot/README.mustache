# {{serviceName}} Service

Spring Boot Server for maestro {{serviceName}} service.


#### Overview
This service is generated by the customized [swagger-codegen](https://github.com/swagger-api/swagger-codegen)
library/language (mr-spring) using **Service Specification** defined by maestro architects.
For more info visit [OpenAPI-Spec](http://swagger.io/specification).

#### How to build
- Import this project to idea as gradle project, steps are on confluence. *If you have gradle in path then you can skip
this step.*
- Service will be build using following options from build file directory (i.e. current dir)
    - ```./gradlew clean build```
    - ```./{{artifactId}}-docker/build-{{artifactId}}-in-docker.sh ./gradlew clean sonarqube``` **recommended** before
promoting changes to perforce.

#### Before promote
- Few files will be auto-generated to keep API in sync with
[Service Specification](https://swarm-cs.engops.health.ge.com/files/mr_s/Cx_dev/host/services/{{artifactId}}/{{artifactId}}.yaml),
following files **should not** be checked in to the perforce:
    - Models - ```{{artifactId}}-api/**/model/**```
    - Api inteface - ```{{artifactId}}-api/**/api/{{serviceName}}.java```
    - Rest controller - ```{{artifactId}}-ws/**/ws/{{serviceName}}Controller.java```
- These files will be re-generated when change in [Service Specification] is detected or clean build is executed.
- Also complete service setup by following
[Create New Service](https://devcloud.swcoe.ge.com/devspace/display/MRHA/Creating+a+New+Service) page

#### How to run
- Start your service as an simple java application using
    - ```java -jar deploy/{{artifactId}}-boot.jar``` *options*
- You can view the api documentation in swagger-ui by pointing to
http://localhost:*port*/*context-root*/api
- Default port value is 0 in application.properties, so service will start on random port. You can find that port in
logs/console, or you can change to choice of yours. **Avoid** checking in port change to perforce.

#### How to publish
- To publish API specification to maven-release-mr
    - Run ```./gradlew interfacePublication artifactoryPublish```
- To publish service executable to maven-snapshot-mr
    - Run ``` ./gradlew servicePublication artifactoryPublish```
